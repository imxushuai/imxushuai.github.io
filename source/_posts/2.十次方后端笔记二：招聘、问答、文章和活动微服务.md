---
title: åæ¬¡æ–¹åç«¯ç¬”è®°äºŒï¼šæ‹›è˜ã€é—®ç­”ã€æ–‡ç« å’Œæ´»åŠ¨å¾®æœåŠ¡
tags:
  - åæ¬¡æ–¹æ‹›è˜å¾®æœåŠ¡
  - åæ¬¡æ–¹é—®ç­”å¾®æœåŠ¡
  - åæ¬¡æ–¹æ–‡ç« å¾®æœåŠ¡
  - åæ¬¡æ–¹æ´»åŠ¨å¾®æœåŠ¡
categories:
  - åæ¬¡æ–¹é¡¹ç›®
abbrlink: 32064
date: 2002-01-02 00:00:02
---

<center><i>ä½¿ç”¨ä»£ç ç”Ÿæˆå™¨å®Œæˆæ‹›è˜ã€é—®ç­”ã€æ–‡ç« ä»¥åŠæ´»åŠ¨å¾®æœåŠ¡</i></center>

![](https://www.imxushuai.com/img/asset/tensquare.jpg)

<!-- more -->

<center><i>å®Œæˆæ‹›è˜ã€é—®ç­”ã€æ–‡ç« ä»¥åŠæ´»åŠ¨å¾®æœåŠ¡ï¼Œå¹¶ä½¿ç”¨ä¸ºéƒ¨åˆ†æ•°æ®æ·»åŠ ç¼“å­˜æœºåˆ¶</i></center>



# æ‹›è˜å¾®æœåŠ¡

## æ‹›è˜å¾®æœåŠ¡CRUDä»£ç ç”Ÿæˆï¼ˆçœç•¥ï¼‰

## è¡¨ç»“æ„åˆ†æ

æ‹›è˜å¾®æœåŠ¡åˆ†ä¸ºä¸¤å—ï¼š

- ä¼ä¸šä¿¡æ¯
- æ‹›è˜ä¿¡æ¯

**tb_enterprise** *ä¼ä¸šè¡¨*

| å­—æ®µåç§°   | å­—æ®µå«ä¹‰     | å­—æ®µç±»å‹ | å¤‡æ³¨             |
| ---------- | ------------ | -------- | ---------------- |
| id         | ID           | æ–‡æœ¬     |                  |
| name       | ä¼ä¸šåç§°     | æ–‡æœ¬     |                  |
| summary    | ä¼ä¸šç®€ä»‹     | æ–‡æœ¬     |                  |
| address    | ä¼ä¸šåœ°å€     | æ–‡æœ¬     |                  |
| labels     | æ ‡ç­¾åˆ—è¡¨     | æ–‡æœ¬     | ç”¨é€—å·åˆ†éš”       |
| coordinate | ä¼ä¸šä½ç½®åæ ‡ | æ–‡æœ¬     | ç»åº¦ï¼Œçº¬åº¦       |
| ishot      | æ˜¯å¦çƒ­é—¨     | æ–‡æœ¬     | 0ï¼šéçƒ­é—¨1ï¼šçƒ­é—¨ |
| logo       | LOGO         | æ–‡æœ¬     |                  |
| jobcount   | èŒä½æ•°       | æ•°å­—     |                  |
| url        | URL          | æ–‡æœ¬     |                  |

**tb_recruit** *æ‹›è˜ä¿¡æ¯è¡¨*

| å­—æ®µåç§°   | å­—æ®µå«ä¹‰ | å­—æ®µç±»å‹ | å¤‡æ³¨                   |
| ---------- | -------- | -------- | ---------------------- |
| id         | ID       | æ–‡æœ¬     |                        |
| jobname    | æ‹›è˜èŒä½ | æ–‡æœ¬     |                        |
| salary     | è–ªèµ„èŒƒå›´ | æ–‡æœ¬     |                        |
| condition  | ç»éªŒè¦æ±‚ | æ–‡æœ¬     |                        |
| education  | å­¦å†è¦æ±‚ | æ–‡æœ¬     |                        |
| type       | ä»»èŒæ–¹å¼ | æ–‡æœ¬     |                        |
| address    | åŠå…¬åœ°å€ | æ–‡æœ¬     |                        |
| eid        | ä¼ä¸šID   | æ–‡æœ¬     |                        |
| createtime | å‘å¸ƒæ—¥æœŸ | æ—¥æœŸ     |                        |
| state      | çŠ¶æ€     | æ–‡æœ¬     | 0ï¼šå…³é—­1:å¼€å¯  2ï¼šæ¨è |
| url        | åŸç½‘å€   | æ–‡æœ¬     |                        |
| label      | æ ‡ç­¾     | æ–‡æœ¬     |                        |
| content1   | èŒä½æè¿° | æ–‡æœ¬     |                        |
| content2   | èŒä½è¦æ±‚ | æ–‡æœ¬     |                        |

## çƒ­é—¨ä¼ä¸šåˆ—è¡¨

### controller

```java
	@GetMapping("/search/hotlist")
	public Result hotlist() {
		return Result.ok("æŸ¥è¯¢æˆåŠŸ", enterpriseService.hotlist());
	}
```

### service

```java
	public List<Enterprise> hotlist() {
		return enterpriseDao.findByIshot("1");
	}
```

### dao

```
List<Enterprise> findByIshot(String ishot);
```

## æ¨èèŒä½åˆ—è¡¨

æŸ¥è¯¢çŠ¶æ€ä¸º2å¹¶ä»¥åˆ›å»ºæ—¥æœŸé™åºæ’åºï¼ŒæŸ¥è¯¢å‰4æ¡è®°å½•

### controller

```java
	/**
	 * æ¨èèŒä½
	 */
	@GetMapping("search/recommend")
	public Result findRecommend() {
		return Result.ok(recruitService.findTop4ByStateOrderByCreatetimeDesc("2"));
	}
```

### service

```java
	/**
	 * æŸ¥è¯¢æ¨èèŒä½
	 * @return
	 */
	public List<Recruit> findTop4ByStateOrderByCreatetimeDesc(String state) {
		return recruitDao.findTop4ByStateOrderByCreatetimeDesc(state);
	}
```

### dao

```java
List<Recruit> findTop4ByStateOrderByCreatetimeDesc(String state);
```

## æœ€æ–°èŒä½åˆ—è¡¨

æŸ¥è¯¢çŠ¶æ€ä¸ä¸º0å¹¶ä»¥åˆ›å»ºæ—¥æœŸé™åºæ’åºï¼ŒæŸ¥è¯¢å‰12æ¡è®°å½•

### controller

```java
	/**
	 * æœ€æ–°èŒä½
	 */
	@GetMapping("search/newlist")
	public Result findNewRecruitList() {
		return Result.ok(recruitService.findNewRecruitList());
	}
```

### service

```java
	/**
	 * æŸ¥è¯¢æœ€æ–°èŒä½åˆ—è¡¨
	 * æŸ¥è¯¢æœ€æ–°çš„12æ¡ä»¥åŠæ’é™¤è¢«å…³é—­çš„èŒä½
	 */
	public List<Recruit> findNewRecruitList() {
		return recruitDao.findTop12ByStateNotOrderByCreatetimeDesc("0");
	}
```

### dao

```java
List<Recruit> findTop12ByStateNotOrderByCreatetimeDesc(String state);
```



# é—®ç­”å¾®æœåŠ¡

## é—®ç­”å¾®æœåŠ¡CRUDä»£ç ç”Ÿæˆï¼ˆçœç•¥ï¼‰

ç”Ÿæˆè¿‡åéœ€è¦æ‰‹åŠ¨æ·»åŠ å…³ç³»è¡¨çš„å®ä½“ç±»

```java
package com.tensquare.qa.pojo;

import lombok.Data;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;
import java.io.Serializable;

@Data
@Entity
@Table(name = "tb_pl")
public class Pl implements Serializable {

    @Id
    private String problemid;

    @Id
    private String labelid;
}

```

## è¡¨ç»“æ„åˆ†æ

é—®ç­”å¾®æœåŠ¡çš„è¡¨åˆ†ä¸ºä¸¤å¼ æ•°æ®è¡¨ä»¥åŠä¸€å¼ å…³ç³»è¡¨ï¼šé—®é¢˜è¡¨ã€å›ç­”è¡¨ä»¥åŠé—®ç­”æ ‡ç­¾å…³ç³»è¡¨

**tb_problem** *é—®é¢˜è¡¨*

| å­—æ®µåç§°   | å­—æ®µå«ä¹‰     | å­—æ®µç±»å‹ | å¤‡æ³¨ |
| ---------- | ------------ | -------- | ---- |
| id         | ID           | æ–‡æœ¬     |      |
| title      | é—®é¢˜æ ‡é¢˜     | æ–‡æœ¬     |      |
| content    | é—®é¢˜å†…å®¹     | æ–‡æœ¬     |      |
| createtime | å‘å¸ƒæ—¥æœŸ     | æ—¥æœŸ     |      |
| updatetime | æ›´æ–°æ—¥æœŸ     | æ—¥æœŸ     |      |
| userid     | å‘å¸ƒäººID     | æ–‡æœ¬     |      |
| nickname   | å‘å¸ƒäººæ˜µç§°   | æ–‡æœ¬     |      |
| visits     | æµè§ˆé‡       | æ•´å‹     |      |
| thumbup    | ç‚¹èµæ•°       | æ•´å‹     |      |
| reply      | å›å¤æ•°       | æ•´å‹     |      |
| solve      | æ˜¯å¦è§£å†³     | æ–‡æœ¬     |      |
| replyname  | æœ€æ–°å›å¤äºº   | æ–‡æœ¬     |      |
| replytime  | æœ€æ–°å›å¤æ—¶é—´ | æ—¥æœŸ     |      |

**tb_reply** *å›ç­”è¡¨*

| å­—æ®µåç§°   | å­—æ®µå«ä¹‰   | å­—æ®µç±»å‹ | å¤‡æ³¨ |
| ---------- | ---------- | -------- | ---- |
| id         | ID         | æ–‡æœ¬     |      |
| problemid  | é—®é¢˜ID     | æ–‡æœ¬     |      |
| content    | é—®é¢˜å†…å®¹   | æ–‡æœ¬     |      |
| createtime | å‘å¸ƒæ—¥æœŸ   | æ—¥æœŸ     |      |
| updatetime | æ›´æ–°æ—¥æœŸ   | æ—¥æœŸ     |      |
| userid     | å‘å¸ƒäººID   | æ–‡æœ¬     |      |
| nickname   | å‘å¸ƒäººæ˜µç§° | æ–‡æœ¬     |      |

**tb_pl** *é—®é¢˜æ ‡ç­¾å…³ç³»è¡¨*

| å­—æ®µåç§°  | å­—æ®µå«ä¹‰ | å­—æ®µç±»å‹ | å¤‡æ³¨ |
| --------- | -------- | -------- | ---- |
| problemid | é—®é¢˜ID   | æ–‡æœ¬     |      |
| labelid   | æ ‡ç­¾ID   | æ–‡æœ¬     |      |

## æœ€æ–°é—®é¢˜åˆ—è¡¨

æœ€æ–°å›å¤çš„é—®é¢˜æ˜¾ç¤ºåœ¨ä¸Šæ–¹ï¼ŒæŒ‰å›å¤æ—¶é—´é™åºæ’åºã€‚

### controller

```java
	/**
	 * æœ€æ–°é—®é¢˜åˆ—è¡¨
	 */
	@GetMapping("newlist/{label}/{page}/{size}")
	public Result findNewProblemList(@PathVariable("label") String labelId,
								 @PathVariable("page") int page,
								 @PathVariable("size") int size) {
			return Result.ok(problemService.findNewProblemList(labelId, page, size));
	}
```

### service

```java
	/**
	 * æŒ‰æ´»è·ƒæ—¶é—´æŸ¥è¯¢é—®é¢˜åˆ—è¡¨
	 *
	 * @param labelId æ ‡ç­¾ID
	 * @param page å½“å‰é¡µç 
	 * @param size å½“å‰é¡µè®°å½•æ•°
	 * @return List<Problem> é—®é¢˜åˆ—è¡¨
	 */
    public List<Problem> findNewProblemList(String labelId, int page, int size) {
		return problemDao.findNewProblemList(labelId, PageRequest.of(page, size));
    }
```

### dao

```java
    @Query("SELECT p FROM Problem p " +
            "WHERE id IN (SELECT pl.problemid FROM Pl pl WHERE pl.labelid = ?1) " +
            "ORDER BY p.replytime DESC")
    List<Problem> findNewProblemList(String labelId, Pageable pageable);
```

## çƒ­é—¨é—®é¢˜åˆ—è¡¨

æŒ‰å›å¤æ•°é™åºæ’åº

### controller

```java
	/**
	 * çƒ­é—¨é—®é¢˜åˆ—è¡¨
	 */
	@GetMapping("hotlist/{label}/{page}/{size}")
	public Result findHotList(@PathVariable("label") String labelId,
							  @PathVariable("page") int page,
							  @PathVariable("size") int size) {
		return Result.ok(problemService.findHotList(labelId, page, size));
	}
```

### service

```java
	/**
	 * æŸ¥è¯¢çƒ­é—¨é—®é¢˜åˆ—è¡¨
	 *
	 * @param labelId æ ‡ç­¾ID
	 * @param page å½“å‰é¡µç 
	 * @param size å½“å‰é¡µè®°å½•æ•°
	 * @return List<Problem> é—®é¢˜åˆ—è¡¨
	 */
	public List<Problem> findHotList(String labelId, int page, int size) {
		return problemDao.findHotProblemList(labelId, PageRequest.of(page, size));
	}
```

### dao

```java
    @Query("SELECT p FROM Problem p " +
            "WHERE id IN (SELECT pl.problemid FROM Pl pl WHERE pl.labelid = ?1) " +
            "ORDER BY p.reply DESC")
    List<Problem> findHotProblemList(String labelId, Pageable pageable);
```

## ç­‰å¾…å›ç­”åˆ—è¡¨

### controller

```java
	/**
	 * å¾…å›å¤é—®é¢˜åˆ—è¡¨
	 */
	@GetMapping("waitlist/{label}/{page}/{size}")
	public Result findWaitList(@PathVariable("label") String labelId,
							  @PathVariable("page") int page,
							  @PathVariable("size") int size) {
		return Result.ok(problemService.findWaitList(labelId, page, size));
	}
```

### service

```java
	/**
	 * æŸ¥è¯¢å¾…å›å¤é—®é¢˜åˆ—è¡¨
	 *
	 * @param labelId æ ‡ç­¾ID
	 * @param page å½“å‰é¡µç 
	 * @param size å½“å‰é¡µè®°å½•æ•°
	 * @return List<Problem> é—®é¢˜åˆ—è¡¨
	 */
	public List<Problem> findWaitList(String labelId, int page, int size) {
		return problemDao.findWaitReplyProblemList(labelId, PageRequest.of(page, size));
	}
```

### dao

```java
    @Query("SELECT p FROM Problem p " +
            "WHERE id IN (SELECT pl.problemid FROM Pl pl WHERE pl.labelid = ?1) " +
            "AND p.reply = 0 " +
            "ORDER BY p.createtime DESC")
    List<Problem> findWaitReplyProblemList(String labelId, Pageable pageable);
```

# æ–‡ç« å¾®æœåŠ¡

## æ–‡ç« å¾®æœåŠ¡CRUDä»£ç ç”Ÿæˆï¼ˆçœç•¥ï¼‰

## è¡¨ç»“æ„åˆ†æ

æ–‡ç« å¾®æœåŠ¡åªæœ‰ä¸€å¼ è¡¨ï¼šæ–‡ç« è¡¨

**tb_article** *æ–‡ç« è¡¨*

| å­—æ®µåç§°   | å­—æ®µå«ä¹‰ | å­—æ®µç±»å‹ | å¤‡æ³¨                 |
| ---------- | -------- | -------- | -------------------- |
| id         | ID       | æ–‡æœ¬     |                      |
| columnid   | ä¸“æ ID   | æ–‡æœ¬     |                      |
| userid     | ç”¨æˆ·ID   | æ–‡æœ¬     |                      |
| title      | æ–‡ç« æ ‡é¢˜ | æ–‡æœ¬     |                      |
| content    | æ–‡ç« å†…å®¹ | æ–‡æœ¬     |                      |
| image      | æ–‡ç« å°é¢ | æ–‡æœ¬     |                      |
| createtime | å‘è¡¨æ—¥æœŸ | æ—¥æœŸ     |                      |
| updatetime | ä¿®æ”¹æ—¥æœŸ | æ—¥æœŸ     |                      |
| ispublic   | æ˜¯å¦å…¬å¼€ | æ–‡æœ¬     | 0ï¼šä¸å…¬å¼€1ï¼šå…¬å¼€     |
| istop      | æ˜¯å¦ç½®é¡¶ | æ–‡æœ¬     | 0ï¼šä¸ç½®é¡¶1ï¼šç½®é¡¶     |
| visits     | æµè§ˆé‡   | æ•´å‹     |                      |
| thumbup    | ç‚¹èµæ•°   | æ•´å‹     |                      |
| comment    | è¯„è®ºæ•°   | æ•´å‹     |                      |
| state      | å®¡æ ¸çŠ¶æ€ | æ–‡æœ¬     | 0ï¼šæœªå®¡æ ¸  1ï¼šå·²å®¡æ ¸ |
| channelid  | æ‰€å±é¢‘é“ | æ•´å‹     | å…³è”é¢‘é“è¡¨ID         |
| url        | URL      | åœ°å€æ–‡æœ¬ |                      |
| type       | æ–‡ç« ç±»å‹ | æ–‡æœ¬     | 0ï¼šåˆ†äº«1ï¼šä¸“æ        |

## æ–‡ç« å®¡æ ¸

### controller

```java
	/**
	 * æ–‡ç« å®¡æ ¸
	 */
	@PutMapping("examine/{articleId}")
	public Result examine(@PathVariable("articleId") Integer articleId) {
		articleService.examine(articleId);
		return Result.ok("å®¡æ ¸æˆåŠŸ");
	}
```

### service

```java
	/**
	 * æ–‡ç« å®¡æ ¸
	 *
	 * @param articleId æ–‡ç« ID
	 */
	public void examine(Integer articleId) {
		articleDao.updateStateById(articleId);
	}
```

### dao

```java
    @Modifying
    @Query("UPDATE Article a SET a.state = '1' " +
            "WHERE a.id = ?1")
    void updateStateById(Integer articleId);
```

## æ–‡ç« ç‚¹èµ

### controller

```java
	/**
	 * æ–‡ç« ç‚¹èµ
	 */
	@PutMapping("thumbup/{articleId}")
	public Result thumbup(@PathVariable("articleId") Integer articleId) {
		articleService.thumbup(articleId);
		return Result.ok("å®¡æ ¸æˆåŠŸ");
	}
```

### service

```java
	/**
	 * æ–‡ç« ç‚¹èµ
	 *
	 * @param articleId æ–‡ç« ID
	 */
	public void thumbup(Integer articleId) {
		articleDao.updateThumbupById(articleId);
	}
```

### dao

```java
    @Modifying
    @Query("UPDATE Article a SET a.thumbup = a.thumbup + 1 " +
            "WHERE a.id = ?1")
    void updateThumbupById(Integer articleId);
```

# Spring Redis

ä½¿ç”¨`Spring cache`å¯¹éƒ¨åˆ†æ•°æ®è¿›è¡Œç¼“å­˜ã€‚

## Dockerå®‰è£…Redis

ä»»ä½•å®‰è£…å¤æ‚çš„ä¸œè¥¿åªè¦å’Œ`Docker`è”ç³»èµ·æ¥ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è¯´é›¶æ“ä½œï¼ï¼ï¼

### ä¸‹è½½Redisé•œåƒ

1. æœç´¢`Redis`é•œåƒ

   ```shell
   docker search redis
   ```

2. ä¸‹è½½`Redis`é•œåƒ

   ```shell
   docker pull redis
   ```

3. ä½¿ç”¨é•œåƒç”Ÿæˆ`Redis`å®¹å™¨å¹¶è¿è¡Œ

   ```shell
   docker run -di --name=tensquare_redis -p 6379:6379 redis
   ```

### Redis-GUIå®¢æˆ·ç«¯

ç»™å¤§å®¶æä¾›ä¸€ä¸ª`Redis`çš„ç•Œé¢å·¥å…· - `RedisDesktopManager`ï¼Œæˆ‘æä¾›è¿™ä¸ªæ˜¯Windowsç‰ˆæœ¬çš„ï¼Œç‰ˆæœ¬æ˜¯`4.0.0`ã€‚è¿™ä¸ªå·¥å…·æœ€æ–°çš„ç‰ˆæœ¬éƒ½æ˜¯è¦æ”¶è´¹çš„äº†ï¼Œè¿˜ä¸ä¾¿å®œã€‚

ğŸ‘‡ç™¾åº¦äº‘ç›˜é“¾æ¥ğŸ‘‡

é“¾æ¥ï¼š[https://pan.baidu.com/s/1bx_a2jQANwPWloZ6-pdBYQ](https://pan.baidu.com/s/1bx_a2jQANwPWloZ6-pdBYQ)
æå–ç ï¼šcsxg

## æ–‡ç« å¾®æœåŠ¡- ç¼“å­˜å¤„ç†

1. å¼•å…¥`Spring Data Redis`ä¾èµ–

   ```xml
   <dependency>
       <groupId>org.springframework.boot</groupId>
       <artifactId>spring-boot-starter-data-redis</artifactId>
   </dependency>
   ```

2. åœ¨`application.yml`ä¸­é…ç½®`Redis`ä¸»æœºä½ç½®

   ```yaml
   spring:   
     redis:
       host: 192.168.136.104
       # å¦‚æœredisç«¯å£ä¿æŒé»˜è®¤çš„è¯ï¼Œå¯ä»¥çœç•¥ç«¯å£é…ç½®
       port: 6379
   ```

3. ä¿®æ”¹`ArticleService#findById`çš„é€»è¾‘

   å…ˆæŸ¥è¯¢`Redis`æ˜¯å¦å·²ç¼“å­˜ï¼Œå¦‚æœå·²ç¼“å­˜ï¼Œå–å‡ºç¼“å­˜çš„æ•°æ®ç›´æ¥è¿”å›ï¼Œå¦åˆ™ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶å­˜å…¥`Redis`ï¼Œæ”¾å…¥æ—¶éœ€è¦è®¾ç½®æœ‰æ•ˆæ—¶é—´ä¸ºä¸€å¤©ã€‚

   ```java
   	@Autowired
   	private RedisTemplate<String, Article> redisTemplate;
   
   	private static final String redisKeyPrefix = "article_";
   
   	/**
   	 * æ ¹æ®IDæŸ¥è¯¢å®ä½“
   	 * @param id
   	 * @return
   	 */
   	public Article findById(String id) {
   		String key = redisKeyPrefix + id;
   		Article article = redisTemplate.opsForValue().get(key);
   		if (article == null) {
   			article = articleDao.findById(id).get();
   			redisTemplate.opsForValue().set(key, article, 1, TimeUnit.DAYS);
   		}
   
   		return article;
   	}
   ```

4. æ›´æ–°ç¼“å­˜

   ä¿®æ”¹ã€åˆ é™¤æ–‡ç« æ—¶ï¼Œæ¸…é™¤ç¼“å­˜ã€‚ç›´æ¥è°ƒç”¨`redisTemplate.delete(key)`å³å¯ã€‚

# Spring Cache + Spring Redis

## æ´»åŠ¨å¾®æœåŠ¡

### æ´»åŠ¨å¾®æœåŠ¡CRUDä»£ç ç”Ÿæˆï¼ˆçœç•¥ï¼‰

### æ´»åŠ¨è¯¦æƒ…ç¼“å­˜

1. å¼•å…¥`Spring Redis`ä¾èµ–

   ```xml
   <dependency>
       <groupId>org.springframework.boot</groupId>
       <artifactId>spring-boot-starter-data-redis</artifactId>
   </dependency>
   ```

2. åœ¨`application.yaml`ä¸­é…ç½®`Redis`ä¸»æœºä½ç½®

   ```yaml
   spring: 
     redis:
       host: 192.168.136.104
       port: 6379
   ```

3. å¼€å¯`Spring Cache`æ³¨è§£æ‰«æï¼Œä¿®æ”¹`GatheringApplication`ï¼Œåœ¨ç±»ä¸ŠåŠ ä¸Š`@EnableCaching`å³å¯

   ```java
   package com.tensquare.gathering;
   import org.springframework.boot.SpringApplication;
   import org.springframework.boot.autoconfigure.SpringBootApplication;
   import org.springframework.cache.annotation.EnableCaching;
   import org.springframework.context.annotation.Bean;
   import util.IdWorker;
   
   @EnableCaching
   @SpringBootApplication
   public class GatheringApplication {
   
   	public static void main(String[] args) {
   		SpringApplication.run(GatheringApplication.class, args);
   	}
   
   	@Bean
   	public IdWorker idWorker(){
   		return new IdWorker(1, 5);
   	}
   	
   }
   ```

4. åœ¨`GatheringService#findById`åŠ å…¥ç¼“å­˜æ³¨è§£

   ```java
   	/**
   	 * æ ¹æ®IDæŸ¥è¯¢å®ä½“
   	 * @param id
   	 * @return
   	 */
   	@Cacheable(value = "gathering", key = "#id")
   	public Gathering findById(String id) {
   		return gatheringDao.findById(id).get();
   	}
   ```

5. åˆ é™¤å’Œä¿®æ”¹æ—¶ï¼Œæ›´æ–°ç¼“å­˜

   ```java
   	/**
   	 * ä¿®æ”¹
   	 * @param gathering
   	 */
   	@CacheEvict(value = "gathering", key = "#id")
   	public void update(Gathering gathering) {
   		gatheringDao.save(gathering);
   	}
   
   	/**
   	 * åˆ é™¤
   	 * @param id
   	 */
   	@CacheEvict(value = "gathering", key = "#id")
   	public void deleteById(String id) {
   		gatheringDao.deleteById(id);
   	}
   ```

   